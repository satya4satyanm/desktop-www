function Dice(i,e,a,o,s,r,n,m,z,d,g,p){t=this,t.size=i,t.rand=e,t.rotEnabled=a,t.img1=o,t.img2=s,t.img3=r,t.img4=n,t.img5=m,t.img6=z,t.x=d,t.y=g,t.ctx=p,t.rotations={x:-10,y:-10,z:-10},t.tempRot={x:-10,y:-10,z:-10},t.points=[-t.size,-t.size,-t.size,t.size,t.size,-t.size,-t.size,t.size,-t.size,-t.size,-t.size,t.size,t.size,-t.size,t.size,t.size,t.size,t.size],t.lastTime=(new Date).getTime(),t.framerateAge=0,t.points2d=new Array;for(var c=t.points.length/3;c--;)t.points2d[c]=[0,0];t.drawSide=function(t,i,e,a){var o=this,s=i[0],r=i[1],n=e[0],m=e[1],z=a[0],d=a[1],g=n-s;if(g||r>m!=z>s){var p=z-s;(p||r>d!=n<s)&&(m-r)/g<(d-r)/p==(s<n==s>z)&&(o.ctx.setTransform((s-n)/250,(r-m)/250,(z-n)/250,(d-m)/250,n+o.x,m+o.y),o.ctx.drawImage(t,0,0))}},t.updateFrameFunc=function(){for(var t,i,e,a,o,s,r,n,m,z=this,d=Math.sin,g=Math.cos,p=z.points2d,c=d(z.rotations.x),h=g(z.rotations.x),x=d(z.rotations.y),y=g(z.rotations.y),l=d(z.rotations.z),f=g(z.rotations.z),w=z.points.length,M=w/3;(w-=3)>=0;)t=z.points[w],y*(o=c*(i=z.points[w+1])+h*(e=z.points[w+2]))-x*t,r=f*(s=x*o+y*t)-l*(a=h*i-c*e),n=l*s+f*a,(m=p[--M])[0]=r,m[1]=n;z.drawSide(z.img1,p[2],p[0],p[3]),z.drawSide(z.img2,p[5],p[1],p[2]),z.drawSide(z.img3,p[0],p[2],p[1]),z.drawSide(z.img4,p[4],p[3],p[0]),z.drawSide(z.img5,p[3],p[4],p[5]),z.drawSide(z.img6,p[1],p[5],p[4])},t.animate=function(){var t=this,i=(new Date).getTime(),e=.001*(i-t.lastTime);t.framerateAge>.25&&(t.framerateAge=0),t.framerateAge+=e,e>.1&&(e=.1);Math.abs(Math.ceil(100*t.tempRot.x)-Math.ceil(100*t.rotations.x))>3?t.rotations.x+=2*e:t.rotations.x=t.tempRot.x,Math.abs(Math.ceil(100*t.tempRot.y)-Math.ceil(100*t.rotations.y))>3?t.rotations.y+=2*e:t.rotations.y=t.tempRot.y,Math.abs(Math.ceil(100*t.tempRot.z)-Math.ceil(100*t.rotations.z))>3?t.rotations.z+=2*e:t.rotations.z=t.tempRot.z,t.tempRot.x==t.rotations.x&&t.tempRot.y==t.rotations.y&&t.tempRot.z==t.rotations.z&&(t.rotEnabled=!1),lastTime=i,t.updateFrameFunc()}}